# AmiiboShelf
Electronics project that acts as a library for Nintendo's Amiibo Figures

## About
Nintendo's Amiibo is a toy that interacts with their game consoles. You place the amiibo over a controller and the game reacts in a pre-programmed way. I enjoy the idea of toys-to-life but other than picking up the Amiibo, there aren't any interactive elements. I figured that it was too much of a hassle to collect all of your Amiibo and scan them in individually, so I designed this system to automate the process.

## Structural Design
The physical structure is a shelving unit. Each shelf has up to 16 indented holes with a diameter of 2 inches and a depth of 3/8ths of an inch for the Amiibos to sit in. Underneath each hole is a coil of wire that serves as an NFC antenna to read the Amiibos data. Each hole also has a photodiode to detect the presence of an Amiibo. Each hole has a ring of a diffusing material around it with four RGB LEDs under the diffusion material. The whole shelving unit has up to 16 shelves. 

## Circuit Design
There is one Raspberry Pi that serves as the main logic center for the device. The pi will manage the human interface and the lighting of the RGB ring around each Amiibo. There is also one ATTiny85 microcontroller to loop through each hole and detect Amiibos. There is one other processor, the PN7150, who connects to the NFC antenna and reads the data from the Amiibos. In order to reduce the price, I opted to re-use a single NFC controller instead of using one for each antenna. In order to do this, I use 2 MAX14661 1:16 MUX. One MUX selects the shelf, while the other selects the hole in the shelf. I combine the signals from the MUX into a transistor so that I effectively have an AND gate to select which specific row an column I want. When these transistors are selected, it completes the connections between the photodiode and the ATTiny85, the connection between the NFC Antenna and the PN7150, and de-activates the latch for the RGB LED controller.

## Software Design
The Raspberry Pi and the ATTiny85 will be working concurrently. This allows the Raspberry Pi to fully devote itself to interacting with the user instead of having to constantly check the status of the shelving unit. The Raspberry Pi is able to re-program the ATTiny85, and it will do so whenever it senses an update on my git repository. The ATTiny85 will constantly loop through each hole and read the photodiodes value. If the last know status of the given slot is different than the current status, then it notifies the PN7150 who will go on to read the value of the currently selected NFC Antenna. Once the value is read, it will send all gathered information to the Raspberry Pi who will then interpret the data in order to figure out important things such as the name of the figure, any stats it might have, and what character the figure is. It will then look through a database of figures to figure out what the color scheme of the figure is, and it will update the RGB controller for the selected slot in order to get the surrounding ring to glow in the same color scheme as the figure. It will then tell the ATTiny85 to continue searching. The Raspberry Pi then updates its interface to refelct the changes. The Raspberry Pi has an interface that shows all the Amiibos currently on the shelf. The user can then sort by name or by supported game. They can then select which amiibo they want to scan in, and the Raspberry Pi will automatically connect to the console, and scan the Amiibo in the game.

## Design Images
